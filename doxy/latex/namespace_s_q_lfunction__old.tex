\section{S\+Q\+Lfunction\+\_\+old Namespace Reference}
\label{namespace_s_q_lfunction__old}\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \textbf{ Send\+User\+\_\+callback} (\textbf{ client}, userdata, message)
\item 
def \textbf{ Update\+\_\+callback} (\textbf{ client}, userdata, message)
\item 
def \textbf{ photon\+Measure\+\_\+callback} (\textbf{ client}, userdata, message)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\textbf{ con} = None
\item 
string \textbf{ broker} = \char`\"{}broker.\+hivemq.\+com\char`\"{}
\item 
string \textbf{ path} = \char`\"{}/media/D\+A\+T\+A\+B\+A\+SE/user\+List\char`\"{}
\item 
\textbf{ client} = mqtt.\+Client()
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\mbox{\label{namespace_s_q_lfunction__old_a2fe34bb6a0c80e0b7baf6510b16f13d5}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!photon\+Measure\+\_\+callback@{photon\+Measure\+\_\+callback}}
\index{photon\+Measure\+\_\+callback@{photon\+Measure\+\_\+callback}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{photon\+Measure\+\_\+callback()}
{\footnotesize\ttfamily def S\+Q\+Lfunction\+\_\+old.\+photon\+Measure\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{client,  }\item[{}]{userdata,  }\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 44 of file S\+Q\+Lfunction\+\_\+old.\+py.


\begin{DoxyCode}
44 \textcolor{keyword}{def }photonMeasure_callback(client, userdata, message):
45     con = lite.connect(path)
46     cur = con.cursor()
47     data = message.payload
48     index = []
49     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(data)):
50         \textcolor{keywordflow}{if} (data[i] == \textcolor{stringliteral}{'%'}):
51             index.append(i)
52     V1 = float(data[:index[0]])
53     V2 = float(data[index[0]+1:index[1]])
54     V3 = float(data[index[1]+1:index[2]])
55     I1 = float(data[index[2]+1:index[3]])
56     I2 = float(data[index[3]+1:index[4]])
57     I3 = float(data[index[4]+1:index[5]])
58     P = float(data[index[5]+1:index[6]])
59     E = float(data[index[6]+1:index[7]])
60     F = float(data[index[7]+1:index[8]])
61     Time = int(data[index[8]+1:index[9]])
62     SocketID = int(data[index[9]+1:index[10]])
63     UserID = data[index[10]+1:index[11]]
64     cur.execute(\textcolor{stringliteral}{"INSERT INTO photonMeasure(UIDtag, SocketID, V1, V2, V3, I1, I2, I3, P, E, F, Time)
       VALUES(?,?,?,?,?,?,?,?,?,?,?,?)"},
65                 (UserID, SocketID, V1, V2, V3, I1, I2, I3, P, E, F, Time))
66     con.commit()
67 
68 \textcolor{comment}{#setup mqtt}
\end{DoxyCode}
\mbox{\label{namespace_s_q_lfunction__old_aa533f7ad86dfa0481f6e1b21a38ce057}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!Send\+User\+\_\+callback@{Send\+User\+\_\+callback}}
\index{Send\+User\+\_\+callback@{Send\+User\+\_\+callback}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{Send\+User\+\_\+callback()}
{\footnotesize\ttfamily def S\+Q\+Lfunction\+\_\+old.\+Send\+User\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{client,  }\item[{}]{userdata,  }\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 14 of file S\+Q\+Lfunction\+\_\+old.\+py.


\begin{DoxyCode}
14 \textcolor{keyword}{def }SendUser_callback(client, userdata, message):
15     con = lite.connect(path)
16     cur = con.cursor()
17     cur.execute(\textcolor{stringliteral}{'select * from list'})
18 
19     data = cur.fetchall()
20     dataSend = \textcolor{stringliteral}{""}
21 
22     \textcolor{keywordflow}{for} element \textcolor{keywordflow}{in} data:
23         print(element)
24         dataSend += (str(element[0])+\textcolor{stringliteral}{'%'}+element[1]+\textcolor{stringliteral}{'%'}+element[2]+\textcolor{stringliteral}{'%'}+str(element[3])+\textcolor{stringliteral}{'%'}+element[4]+\textcolor{stringliteral}{'%'}+
      str(element[5])+\textcolor{stringliteral}{'%'}+element[6]+\textcolor{stringliteral}{'%'}+str(element[7])+\textcolor{stringliteral}{'%'}+str(element[8])+\textcolor{stringliteral}{'%'})
25 
26     publish.single(\textcolor{stringliteral}{"HANevse/UserList1"}, dataSend, hostname=broker)
27     \textcolor{comment}{#print(dataSend)}
28 
\end{DoxyCode}
\mbox{\label{namespace_s_q_lfunction__old_a819a647d1504d13781ab187377923523}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!Update\+\_\+callback@{Update\+\_\+callback}}
\index{Update\+\_\+callback@{Update\+\_\+callback}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{Update\+\_\+callback()}
{\footnotesize\ttfamily def S\+Q\+Lfunction\+\_\+old.\+Update\+\_\+callback (\begin{DoxyParamCaption}\item[{}]{client,  }\item[{}]{userdata,  }\item[{}]{message }\end{DoxyParamCaption})}



Definition at line 29 of file S\+Q\+Lfunction\+\_\+old.\+py.


\begin{DoxyCode}
29 \textcolor{keyword}{def }Update_callback(client, userdata, message):
30     con = lite.connect(path)
31     cur = con.cursor()
32     data = message.payload
33     index = []
34     \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(data)):
35         \textcolor{keywordflow}{if} (data[i] == \textcolor{stringliteral}{'%'}):
36             index.append(i)
37     UserId = int(data[:index[0]])
38     PendingCharger = int(data[index[0]+1:index[1]])
39     StartTime = int(data[index[1]+1:index[2]])
40     cur.execute(\textcolor{stringliteral}{"UPDATE list SET PendingCharger=? WHERE Id=?"}, (PendingCharger, UserId))
41     cur.execute(\textcolor{stringliteral}{"UPDATE list SET StartTime=? WHERE Id=?"}, (StartTime, UserId))
42     con.commmit()
43 
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\label{namespace_s_q_lfunction__old_a6e92b4071d09fa59ae998b9fd92c5807}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!broker@{broker}}
\index{broker@{broker}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{broker}
{\footnotesize\ttfamily string S\+Q\+Lfunction\+\_\+old.\+broker = \char`\"{}broker.\+hivemq.\+com\char`\"{}}



Definition at line 8 of file S\+Q\+Lfunction\+\_\+old.\+py.

\mbox{\label{namespace_s_q_lfunction__old_afd853b9a63374059ab0eabeb24513d09}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!client@{client}}
\index{client@{client}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{client}
{\footnotesize\ttfamily S\+Q\+Lfunction\+\_\+old.\+client = mqtt.\+Client()}



Definition at line 69 of file S\+Q\+Lfunction\+\_\+old.\+py.

\mbox{\label{namespace_s_q_lfunction__old_adb268b8fd9999a94d5ac8b365e7736b3}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!con@{con}}
\index{con@{con}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{con}
{\footnotesize\ttfamily S\+Q\+Lfunction\+\_\+old.\+con = None}



Definition at line 7 of file S\+Q\+Lfunction\+\_\+old.\+py.

\mbox{\label{namespace_s_q_lfunction__old_a6e3ee58e347a0b83dab517fc9fd09ea6}} 
\index{S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}!path@{path}}
\index{path@{path}!S\+Q\+Lfunction\+\_\+old@{S\+Q\+Lfunction\+\_\+old}}
\subsubsection{path}
{\footnotesize\ttfamily string S\+Q\+Lfunction\+\_\+old.\+path = \char`\"{}/media/D\+A\+T\+A\+B\+A\+SE/user\+List\char`\"{}}



Definition at line 12 of file S\+Q\+Lfunction\+\_\+old.\+py.

